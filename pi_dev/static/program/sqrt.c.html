<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>~/embedded/sqrt.c.html</title>
<meta name="Generator" content="Vim/7.2">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body bgcolor="#002b36" text="#839496"><font face="monospace">
<span style="background-color: #073642"><font color="#586e75">&nbsp;1 </font></span><font color="#cb4b16">#include </font><font color="#2aa198">&lt;stdio.h&gt;</font><br>
<span style="background-color: #073642"><font color="#586e75">&nbsp;2 </font></span><font color="#cb4b16">#include </font><font color="#2aa198">&lt;math.h&gt;</font><br>
<span style="background-color: #073642"><font color="#586e75">&nbsp;3 </font></span><font color="#b58900">float</font>&nbsp;my_sqrt(<font color="#b58900">float</font>&nbsp;a);<br>
<span style="background-color: #073642"><font color="#586e75">&nbsp;4 </font></span><font color="#b58900">int</font>&nbsp;main(<font color="#b58900">int</font>&nbsp;argc, <font color="#b58900">const</font>&nbsp;<font color="#b58900">char</font>&nbsp;*argv[])<br>
<span style="background-color: #073642"><font color="#586e75">&nbsp;5 </font></span>{<br>
<span style="background-color: #073642"><font color="#586e75">&nbsp;6 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#b58900">float</font>&nbsp;a;<br>
<span style="background-color: #073642"><font color="#586e75">&nbsp;7 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<font color="#2aa198">&quot;Input the num to cal root: </font><font color="#dc322f">\n</font><font color="#2aa198">&quot;</font>);<br>
<span style="background-color: #073642"><font color="#586e75">&nbsp;8 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanf(<font color="#2aa198">&quot;</font><font color="#dc322f">%f</font><font color="#2aa198">&quot;</font>,&amp;a);<br>
<span style="background-color: #073642"><font color="#586e75">&nbsp;9 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(<font color="#2aa198">&quot;</font><font color="#dc322f">%.0f</font><font color="#2aa198">&nbsp;的平方根等于: </font><font color="#dc322f">%.2f</font><font color="#dc322f">\n</font><font color="#2aa198">&quot;</font>,a,my_sqrt(a));<br>
<span style="background-color: #073642"><font color="#586e75">10 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#719e07">return</font>&nbsp;<font color="#2aa198">0</font>;<br>
<span style="background-color: #073642"><font color="#586e75">11 </font></span>}<br>
<span style="background-color: #073642"><font color="#586e75">12 </font></span><font color="#586e75"><i>/*</i></font><font color="#586e75"><i>迭代法求平方根</i></font><font color="#586e75"><i>*/</i></font><br>
<span style="background-color: #073642"><font color="#586e75">13 </font></span><font color="#b58900">float</font>&nbsp;my_sqrt(<font color="#b58900">float</font>&nbsp;a)<br>
<span style="background-color: #073642"><font color="#586e75">14 </font></span>{<br>
<span style="background-color: #073642"><font color="#586e75">15 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#b58900">float</font>&nbsp;x0,x1;<br>
<span style="background-color: #073642"><font color="#586e75">16 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x0 = a / <font color="#2aa198">2</font>;<br>
<span style="background-color: #073642"><font color="#586e75">17 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x1 = (x0 + a / x0) / <font color="#2aa198">2</font>;<br>
<span style="background-color: #073642"><font color="#586e75">18 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#719e07">while</font>&nbsp;(fabs(x1 - x0) &gt;= <font color="#2aa198">1e-5</font>) {<br>
<span style="background-color: #073642"><font color="#586e75">19 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x0 = x1;<br>
<span style="background-color: #073642"><font color="#586e75">20 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x1 = (x0 + a / x0) / <font color="#2aa198">2</font>;<br>
<span style="background-color: #073642"><font color="#586e75">21 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span style="background-color: #073642"><font color="#586e75">22 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#719e07">return</font>&nbsp;x1;<br>
<span style="background-color: #073642"><font color="#586e75">23 </font></span>}<br>
</font></body>
</html>
